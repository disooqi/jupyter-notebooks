webpackJsonp([29],{"/4tO":function(module,exports,e){(function(_){var t,n;t=[e,exports,module,e("AwHF"),e("HDvv"),e("8k/k"),e("EW+g"),e("YowE"),e("M8n6")],void 0!==(n=function(require,exports,module){"use strict";var _=e("AwHF"),t=e("HDvv"),n=e("8k/k"),i=e("EW+g"),r=e("YowE");e("M8n6");var o=t.extend({template:r,stateModelProperty:"viewModel",events:{'click [data-js="generate-token"]':"generateToken",'click [data-js="get-token"]':"getToken"},templateOptions:function templateOptions(){return{userEmail:n.get().email_address}},initialize:function initialize(e){_(this).extend(_(e).pick("itemMetadata")),this.viewModel=new i({},{itemMetadata:this.itemMetadata}),this.viewModel.getToken(),this.listenTo(this.viewModel,"change:secret",this.renderTokenValue)},postRender:function postRender(){this.renderTokenValue()},renderTokenValue:function renderTokenValue(){this.$$("secret").text(this.viewModel.get("secret"))},generateToken:function generateToken(e){e.preventDefault(),this.viewModel.generateToken()},getToken:function getToken(e){e.preventDefault(),this.viewModel.getToken()}});module.exports=o}.apply(exports,t))&&(module.exports=n)}).call(exports,e("AwHF"))},"/ziB":function(module,exports,e){var t,n;t=[e,exports,module,e("8k/k"),e("E/rU")],void 0!==(n=function(require,exports,module){"use strict";var t=e("8k/k"),n=e("E/rU"),i="onDemandProgrammingUngradedScriptTokens.v1";module.exports={get:function get(e){return new n(e).getWithUserCourseItemId(i,{fields:["secret","issuedTo","issuedAt","expiresAt"]})},newToken:function newToken(e,r){var o=new n(e),a=null,s={courseId:e.get("course").get("id"),itemId:e.get("id"),learnerId:t.get().id};return o.create(i,s,null,!1)}}}.apply(exports,t))&&(module.exports=n)},"2G1c":function(module,exports,e){var t,n;!function(i){var r=function(e,t,n){return function template(e){var t=[],n={},i;return t.push('<div class="c-programming-instructions bt3-row"><div class="bt3-col-md-8"><div data-js="instructions" class="c-programming-instructions-content"></div></div><div class="bt3-col-md-4"><div data-js="token-box"></div><div data-js="how-to-submit" class="bt3-hide well theme-light"><h3 class="c-title">How to submit</h3><p>When you\'re ready to submit, you can upload files for each part\nof the assignment on the "My submission" tab.</p></div></div></div>'),t.join("")}};t=[e("NXid")],void 0!==(n=function(e){var t,n;return r(e,t,n)}.apply(exports,t))&&(module.exports=n)}(window)},"4Zl4":function(module,exports,e){var t=e("n5HO");"string"==typeof t&&(t=[[module.i,t,""]]);var n,i={};i.transform=void 0;var r=e("MTIv")(t,i);t.locals&&(module.exports=t.locals)},"AnE/":function(module,exports){},ELJ7:function(module,exports,e){var t,n;t=[e,exports,module,e("AwHF"),e("oLtT")],void 0!==(n=function(require,exports,module){"use strict";var _=e("AwHF"),t=e("oLtT");module.exports={metadata:function metadata(e,t){return t=t||"itemMetadata",function(){return this[t].get(e)}},user:{id:function id(){return t.get("id")}}}}.apply(exports,t))&&(module.exports=n)},"EW+g":function(module,exports,e){(function(_){var t,n;t=[e,exports,module,e("AwHF"),e("wKDH"),e("ISL6")],void 0!==(n=function(require,exports,module){"use strict";var _=e("AwHF"),t=e("wKDH"),n=e("ISL6"),i=t.extend({defaults:{state:"empty",secret:null},fsm:{states:["empty","getting","displaying","generating","error"],transitions:{displaying:["getting","generating"],generating:["getting","displaying"],error:["getting","generating"]}},initialize:function initialize(e,t){_(this).bindAll("onGenerateSuccess","onGenerateFailure","onGetSuccess","onGetFailure"),_(this).extend(_(t).pick("itemMetadata"))},_generateToken:function _generateToken(){return this.transition("generating"),n.newToken(this.itemMetadata).then(this.onGenerateSuccess,this.onGenerateFailure)},generateToken:function generateToken(){this._generateToken().done()},getToken:function getToken(){this.transition("getting"),n.get(this.itemMetadata).then(this.onGetSuccess,this.onGetFailure).done()},onGenerateSuccess:function onGenerateSuccess(e){var t=e.body.elements[0];this.transition("displaying",{secret:t.token||t.secret})},onGenerateFailure:function onGenerateFailure(e){throw this.transition("error"),e},onGetSuccess:function onGetSuccess(e){var t=e.elements[0];this.transition("displaying",{secret:t.token||t.secret})},onGetFailure:function onGetFailure(e){if(404===e.status)return this._generateToken();throw this.transition("error"),e}});module.exports=i}.apply(exports,t))&&(module.exports=n)}).call(exports,e("AwHF"))},Fim6:function(module,exports,e){(function(t,_,n){var i,r;i=[e,exports,module,e("wu4F"),e("U7vG"),e("AwHF"),e("WXze"),e("JHGP"),e("QVAP"),e("8k/k"),e("lUwm"),e("P9Xs"),e("DwrM"),e("G894"),e("6UQN"),e("q6a4"),e("/ziB"),e("OR93"),e("4Zl4")],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,n,i=e("wu4F"),r=e("U7vG"),_=e("AwHF"),o=e("WXze"),a=e("JHGP"),s=e("QVAP"),c=e("8k/k"),u=e("lUwm"),l=e("P9Xs"),d=l.fetchVerifiableId,p=l.verifyAssignment,m=e("DwrM"),g=e("G894"),f=g.FormattedMessage,h=e("6UQN"),v=e("q6a4"),k=e("/ziB");e("OR93"),e("4Zl4");var y={gradedProgramming:v,ungradedProgramming:k},T=(n=t=function(e){function ScriptTokenBox(){var t,n,i;_classCallCheck(this,ScriptTokenBox);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(o))),n.state={state:"ready",token:{},currentTime:Date.now(),agreementComplete:!1,generatingToken:!1},n.onSubmitHonorCodeAgreement=function(){n.setState({generatingToken:!0}),d().then(function(e){p(e,n.state.fullName).then(function(e){n.generateToken(e.get("id")),n.setState({isVerifying:!1,generatingToken:!1,agreementComplete:!1})})})},n.onVerificationComplete=function(e){e&&!0===e.hasVerified?n.generateToken(n.verificationViewModel.get("verifiableId")):n.generateToken(),n.setState({isVerifying:!1})},n.onTokenNotFound=function(){n.requiresVerification()?n.setState({state:"displaying"}):n.generateToken()},n.onTokenGenerated=function(){n.loadToken()},n.onFailedTokenGeneration=function(e){n.setState({state:"error",error:e})},n.onVerificationModalClose=function(){n.setState({isVerifying:!1})},n.onReceiveToken=function(e){n.setState({state:"displaying",token:e})},n.verifyAndGenerateToken=function(e){e&&e.preventDefault(),n.requiresVerification()?n.setState({isVerifying:!0}):n.generateToken()},n.updateCurrentTime=function(){n.setState({currentTime:Date.now()})},n.onHonorCodeAgreementComplete=function(e){n.setState({agreementComplete:!0,fullName:e})},n.onHonorCodeAgreementIncomplete=function(){n.setState({agreementComplete:!1})},i=t,_possibleConstructorReturn(n,i)}return _inherits(ScriptTokenBox,e),ScriptTokenBox.prototype.componentDidMount=function componentDidMount(){var e=this.props.itemMetadata.getTypeName();this.api=y[e],m(this.api,"Unknown assignment type: "+e),this.currentTimeInterval=setInterval(this.updateCurrentTime,1e3),this.loadToken()},ScriptTokenBox.prototype.componentWillUnmount=function componentWillUnmount(){clearInterval(this.currentTimeInterval)},ScriptTokenBox.prototype.isVerifiable=function isVerifiable(){return this.props.verificationDisplay.shouldPromptForVerification()},ScriptTokenBox.prototype.requiresVerification=function requiresVerification(){return this.isGraded()&&this.isVerifiable()},ScriptTokenBox.prototype.loadToken=function loadToken(){this.setState({state:"getting"}),this.api.get(this.props.itemMetadata).then(o).then(function(e){return e.elements[0]}).then(this.onReceiveToken,this.onTokenNotFound).done()},ScriptTokenBox.prototype.generateToken=function generateToken(e){this.setState({state:"generating"}),this.api.newToken(this.props.itemMetadata,e).then(this.onTokenGenerated,this.onFailedTokenGeneration)},ScriptTokenBox.prototype.isGraded=function isGraded(){return"gradedProgramming"===this.props.itemMetadata.getTypeName()},ScriptTokenBox.prototype.render=function render(){var e=this.state,t=e.state,n=e.token,o=e.currentTime,s=e.isVerifying,l=e.error,d=n&&n.expiresAt-o<=0;return r.createElement("div",{className:"rc-ScriptTokenBox well card-rich-interaction"},r.createElement("h3",{className:"head-2-text"},h("How to submit")),r.createElement("p",null,h("Copy the token below and run the submission script included in the assignment download.\n          When prompted, use your email address")," ",r.createElement("b",null,c.get().email_address),"."),r.createElement("div",{className:"token-area bt3-text-center"},_(["getting","generating"]).contains(t)&&r.createElement("p",null,h("Loading token...")),_(["displaying"]).contains(t)&&r.createElement("div",null,n&&r.createElement("div",null,(!n.expiresAt||!d)&&r.createElement("h4",null,n.secret),n.expiresAt&&!d&&r.createElement("p",{className:"caption-text"},r.createElement(f,{message:h("This token expires in {expirationTime}"),expirationTime:i(n.expiresAt).fromNow(!0)})),n.expiresAt&&d&&r.createElement("p",{className:"caption-text"},h("Your token expired"))),r.createElement("p",null,r.createElement("button",{className:"button-link",onClick:this.verifyAndGenerateToken},h("Generate new token")))),_(["error"]).contains(t)&&r.createElement("div",null,r.createElement("p",null,r.createElement(f,{message:h("There was an error getting your token: {error}"),error:l})," ",r.createElement("button",{className:"button-link",onClick:this.verifyAndGenerateToken},"Click here to try to get it again")))),r.createElement("p",null,h("Your submission token is unique to you and should not be shared with anyone.\n          You may submit as many times as you like.")),s&&r.createElement(a,{className:"honor-code-modal",modalName:"Programming Assignment Token",handleClose:this.onVerificationModalClose},r.createElement("h2",{className:"head-2-text"},h("Honor Code")),r.createElement(u,{onAgreementComplete:this.onHonorCodeAgreementComplete,onAgreementIncomplete:this.onHonorCodeAgreementIncomplete,isShownInsideModal:!0}),r.createElement("div",{className:"align-right"},r.createElement("button",{className:"agreement-continue-button primary",disabled:!this.state.agreementComplete||this.state.generatingToken,onClick:this.onSubmitHonorCodeAgreement},h(this.state.generatingToken?"Loading...":"Continue")))))},ScriptTokenBox}(r.Component),t.propTypes={itemMetadata:r.PropTypes.object.isRequired,verificationDisplay:r.PropTypes.object.isRequired},t.contextTypes={fluxibleContext:r.PropTypes.object.isRequired},n);module.exports=T}.apply(exports,i))&&(module.exports=r)}).call(exports,e("U7vG"),e("AwHF"),e("wu4F"))},ISL6:function(module,exports,e){var t,n;t=[e,exports,module,e("E/rU")],void 0!==(n=function(require,exports,module){"use strict";var t=e("E/rU"),n="onDemandProgrammingTokens.v1";module.exports={get:function get(e){return new t(e).getWithCourseItemId(n)},newToken:function newToken(e){var i=new t(e),r=null,o={courseId:e.get("course").get("id"),itemId:e.get("id")};return i.create(n,o,null,!1)}}}.apply(exports,t))&&(module.exports=n)},M8n6:function(module,exports,e){var t=e("W92f");"string"==typeof t&&(t=[[module.i,t,""]]);var n,i={};i.transform=void 0;var r=e("MTIv")(t,i);t.locals&&(module.exports=t.locals)},OR93:function(module,exports,e){var t=e("AnE/");"string"==typeof t&&(t=[[module.i,t,""]]);var n,i={};i.transform=void 0;var r=e("MTIv")(t,i);t.locals&&(module.exports=t.locals)},SzGT:function(module,exports,e){var t,n;t=[e,exports,module,e("Elof"),e("iFGm"),e("a1gm")],void 0!==(n=function(require,exports,module){"use strict";var t=e("Elof"),n=e("iFGm"),i=e("a1gm");module.exports=function(e){var r=e.courseId,o=e.itemId,a=t.tupleToStringKey([r,o]),s=new n(a);return i.get(s.toString())}}.apply(exports,t))&&(module.exports=n)},W92f:function(module,exports){},YowE:function(module,exports,e){var t,n;!function(i){var r=function(e,t,n){return function template(t){var n=[],i={},r,o=t||{};return function(t){n.push('<div class="rc-TokenBox well"><h5 class="headline-2-text">How to submit</h5><p>Copy the token below and run the submission script included in the assignment download.\nWhen prompted, use your email address <b>'+e.escape(null==(r=t)?"":r)+'</b>.\n</p><div class="token-generator bt3-text-center"><div data-state="getting generating"><p>Loading token...</p></div><div data-state="displaying"><h5 data-js="secret" class="headline-2-text"></h5><p><a data-js="generate-token" href="#">Generate new token</a></p></div><div data-state="error"><p>There was an error getting your token:&nbsp;<a data-js="get-token" href="#">Click here to try to get it again</a></p></div></div><p>Your submission token is unique to you and should not be shared with anyone.\nYou may submit as many times as you like.</p></div>')}.call(this,"userEmail"in o?o.userEmail:"undefined"!=typeof userEmail?userEmail:void 0),n.join("")}};t=[e("NXid")],void 0!==(n=function(e){var t,n;return r(e,t,n)}.apply(exports,t))&&(module.exports=n)}(window)},a1gm:function(module,exports,e){var t,n;t=[e,exports,module,e("LwZ5")],void 0!==(n=function(require,exports,module){"use strict";var t=e("LwZ5");module.exports=t("/api/onDemandProgrammingImmediateInstructions.v1/",{type:"rest"})}.apply(exports,t))&&(module.exports=n)},dAzo:function(module,exports,e){var t,n;t=[e,exports,module,e("go2y"),e("WXze"),e("8k/k"),e("SzGT"),e("Lo1z")],void 0!==(n=function(require,exports,module){"use strict";var t=e("go2y"),n=e("WXze"),i=e("8k/k"),r=e("SzGT"),o=e("Lo1z");module.exports=function(e){return i.isAuthenticatedUser()?r(e).then(n).then(function(e){var t=e.elements[0];return new o(t,{parse:!0})}):t({})}}.apply(exports,t))&&(module.exports=n)},fHpy:function(module,exports,e){(function(_){var t,n;t=[e,exports,module,e("AwHF"),e("M9wU"),e("ELJ7"),e("ftdk"),e("HDvv"),e("Fim6"),e("/4tO"),e("2G1c")],void 0!==(n=function(require,exports,module){"use strict";var _=e("AwHF"),t=e("M9wU"),n=e("ELJ7"),i=e("ftdk"),r=e("HDvv"),o=e("Fim6"),a=e("/4tO"),s=e("2G1c"),c=r.extend({name:"body",template:s,multitracker:{namespace:"open_course_item.programing_instructions",baseValues:["open_course_id","module_id","lesson_id","item_id"],definitions:{open_course_id:n.metadata("course.id"),module_id:n.metadata("lesson.module.id"),lesson_id:n.metadata("lesson.id"),item_id:n.metadata("id")},events:{render:[]}},initialize:function initialize(e){_(this).extend(_(e).pick("instructions","itemMetadata","learnerAssignment","verificationDisplay")),t.setMetatags({pageName:"title-and-description",context:{title:this.itemMetadata.getName(),description:this.itemMetadata.get("lesson.module.description")}})},postRender:function postRender(){this.track("render")},renderSubviews:function renderSubviews(){switch(this.renderReactViews(),this.itemMetadata.getTypeName()){case"programming":this.region.append(a,{to:this.$$("token-box"),initialize:{itemMetadata:this.itemMetadata},module:a});break;case"gradedProgramming":case"ungradedProgramming":"script"===this.learnerAssignment.submissionBuilderSchema.get("typeName")?this.renderReactIntoElement(o,this.$$("token-box")[0],{itemMetadata:this.itemMetadata,verificationDisplay:this.verificationDisplay}):this.$$("how-to-submit").removeClass("bt3-hide")}},renderReactViews:function renderReactViews(){this.instructions&&i(this.instructions.get("assignmentInstructions"),this.$$("instructions"))}});module.exports=c}.apply(exports,t))&&(module.exports=n)}).call(exports,e("AwHF"))},n5HO:function(module,exports){},q6a4:function(module,exports,e){var t,n;t=[e,exports,module,e("8k/k"),e("E/rU")],void 0!==(n=function(require,exports,module){"use strict";var t=e("8k/k"),n=e("E/rU"),i="onDemandProgrammingGradedScriptTokens.v1";module.exports={get:function get(e){return new n(e).getWithUserCourseItemId(i,{fields:["secret","issuedTo","issuedAt","expiresAt"]})},newToken:function newToken(e,r){var o=new n(e),a=null,s={courseId:e.get("course").get("id"),itemId:e.get("id"),learnerId:t.get().id,verifiableId:r||null};return o.create(i,s,null,!1)}}}.apply(exports,t))&&(module.exports=n)},xuVR:function(module,exports,e){(function(t){var n,i;n=[e,exports,module,e("go2y"),e("U7vG"),e("QVAP"),e("H+ns"),e("dAzo"),e("IXkr"),e("fHpy"),e("lvD+"),e("vPxY")],void 0!==(i=function(require,exports,module){"use strict";function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,n,i=e("go2y"),r=e("U7vG"),o=e("QVAP"),a=e("H+ns"),s=e("dAzo"),c=e("IXkr"),u=e("fHpy"),l=e("lvD+"),d=e("vPxY"),p=(n=t=function(e){function ProgrammingInstructions(){var t,n,i;_classCallCheck(this,ProgrammingInstructions);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(o))),n.state={instructions:null,learnerAssignment:null},i=t,_possibleConstructorReturn(n,i)}return _inherits(ProgrammingInstructions,e),ProgrammingInstructions.prototype.componentDidMount=function componentDidMount(){this.fetchData()},ProgrammingInstructions.prototype.fetchData=function fetchData(){var e=this;if("programming"===this.props.itemMetadata.getTypeName()){var t=s({itemMetadata:this.props.itemMetadata,courseId:this.props.itemMetadata.get("course.id"),itemId:this.props.itemMetadata.get("id")});i(t).then(function(t){e.setState({instructions:t})})}else{var n=c({itemMetadata:this.props.itemMetadata});i(n).then(function(t){e.setState({instructions:t.submissionLearnerSchema.get("instructions"),learnerAssignment:t})})}},ProgrammingInstructions.prototype.render=function render(){var e={itemMetadata:this.props.itemMetadata,instructions:this.state.instructions,learnerAssignment:this.state.learnerAssignment,verificationDisplay:this.props.verificationDisplay};return r.createElement("div",{className:"rc-ProgrammingInstructions"},this.state.instructions&&r.createElement(o,{viewOptions:e,ViewClass:u,renderOnce:!0}))},ProgrammingInstructions}(r.Component),t.propTypes={itemMetadata:r.PropTypes.instanceOf(d).isRequired,verificationDisplay:r.PropTypes.instanceOf(l).isRequired},n);module.exports=a(p,["VerificationStore"],function(e){return{verificationDisplay:e.VerificationStore.getVerificationDisplay()}})}.apply(exports,n))&&(module.exports=i)}).call(exports,e("U7vG"))}});